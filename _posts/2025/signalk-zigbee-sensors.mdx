---
publishDate: 2025-09-16
title: Zigbee Sensors with SignalK 
author: Greg Young 
image: ~/assets/images/WSK-dashboard.webp
category: Tutorial
tags: [plugins, zigbee, sensors]
excerpt: Low cost zigbee (wireless) sensors are readily available for use on doors, hatch, portholes; along with more intelligent sensors for Smoke, Carbon Monoxide, Temperature, Humidity & Motion. With a low cost zigbee gateway & the SignalK zigbee plugin, these can be simply integrated into Signal K forming a powerful wireless sensor network.
---

## Background

I wanted to fit door/window sensors to my boat, given that a number of my portholes are close to the waterline, a disaster waiting to happen when visitors are on board & I get underway. I needed wireless sensors, that would "stick" onto window/door frames, and have reliable coverage, decent battery life & be inexepensive.

![alt text](../../public/images/posts/signalk-zigbee-sensors/porthole_sensor.webp)

After initial testing and success, I expanded the range of sensor types and now have 30 zigbee devices scattered around the boat, including in the engine room and bilge spaces; that have operated reliably for >2 years.

## What is Zigbee

Zigbee is a low power wireless protocol for enabling sensors and other devices for home automation & telemetry/control, it operates in the same 2.4GHz spectrum as wifi and bluetooth; however differs in that its power consumption is better optimised for battery operated devices. The rise of Home Automation & IoT has driven extensive availability of low cost zigbee sensors, that span categories from simple magnetic switch sensors for doors/windows, proximity/motion sensors & through to environmental sensors such as smoke, Carbon Monxide , temperature & humidity.  These sensors are inexpensive and readily available from a variety of online sources.
I have sensors fitted across my 19m (60ft) Flybridge Motor Yacht, including in the engine room & bilges, with no difficulty in wireless range/quality reception to a centrally mounted "Zigbee USB dongle" connected to the boats RPi (SignalK server).
Utilising WilhelmSK I have built dashboards that visually display the status of these sensors; along with NodeRed flows for generation of alarms and alerts.

## Zigbee Sensors

Zigbee sensors are in many cases battery operated, particularly for small devices that have infrequent update intervals, where battery life of 2+years from small "button" cells is possible.
My initial hatch/porthole "magnetic proximity" sensors simply "stick" with double side tape to the frame; and after 2+ years of use have proven reliable, despite my initial reservations of durability. These sensors use a magnet in a small housing, and in my experience even with a "gap" of up to 20mm (3/4") they trigger reliably.

![alt text](<../../public/images/posts/signalk-zigbee-sensors/aqara door window sensor.webp>)

Whilst Bluetooth sensors are also available, their battery life tends to be shorter, and the cost is typically higher, as compared to zigbee sensors.
After successfully fitting a number of these zigbee magnetic 'switch" sensors, I further expanded the sensor collection to include:

- Temperature/Humidity
- Carbon Monoxide
- Smoke
- Motion
- Wireless push button switches
- Ultrasonic water level (Black tank)

## Interfacing Zigbee to Signal K Server & Hardware

## Zigbee Coordinator

ZigBee Coordinators (ZCs) are the only ZigBee device-type that can form (as opposed to join) a network. Or in other words is like a "gateway" for Zigbee devices to connect to RPi /signalK.
ZigBee Coordinators (ZCs) are the only ZigBee device-type that can form (as opposed to join) a network. Or in other words is like a "gateway" for Zigbee devices to connect to RPi /signalK.
There are various Zigbee adaptors/gateways available - however for this purpose a simple USB device that just passes the information bidirectionally between the sensors & the RPi will suffice; I have used a "Sonoff Zigbee 3.0 USB ZBdongle-P".

![alt text](<../../public/images/posts/signalk-zigbee-sensors/zigbee coordinator.webp>)

This has the advantage of being powered via its USB connection to the RPi, it features an "external antenna" and by using a simple USB extension cable it can be optimally positioned for reception performance.
The dongle needs to be flashed with "Z-stack coordinator" firmware, if not already supplied with "zstack firmware" from the factory (see this guide).
The dongle needs to be flashed with "Z-stack coordinator" firmware, if not already supplied with "zstack firmware" from the factory (see this guide).

 <https://github.com/Koenkk/Z-Stack-firmware/blob/master/coordinator/README.md>

## Zigbee2MQTT software

This software runs on the RPi providing a "bridge" between zigbee devices (connected via the "zigbee coordinator") & an MQTT server running on RPi.

For installing it onto RPi and configuring it, see this guide.

<https://www.zigbee2mqtt.io/guide/getting-started/>

## Zigbee Setup

After following above Zigbee2MQTT guide for installation & configuration, this will then create a "frontend on port 8080" - that provides a web page for adding & configuring zigbee devices.
(Use your same RPi IPaddress with :8080 appended, note this can be changed as required)
![alt text](<../../public/images/posts/signalk-zigbee-sensors/zigbee2mqtt devices.webp>)

On the top row - click on "permit  join all" , this puts the zigbee stick into "pairing" mode. Then likewise on your sensors, click on the pairing button (or initiate pairing - it depends on zigbee device) For the Aqara zigbee window/door sensors, you click the small button on its side. You should see the sensor appear in the list. Give it a "friendly name".

![alt text](<../../public/images/posts/signalk-zigbee-sensors/zigbee2mqtt settings devices.webp>)

Configure the MQTT "base topic" & the MQTT server details. The sensor should now be sending data to the MQTT server with a JSON payload, which needs to be "parsed" to extract individual data and populate respective SignalK paths.  This is done via a simple NodeRed flow.
Configure the MQTT "base topic" & the MQTT server details. The sensor should now be sending data to the MQTT server with a JSON payload, which needs to be "parsed" to extract individual data and populate respective SignalK paths.  This is done via a simple NodeRed flow.
Zigbee2mqtt software has an extensive & well supported database of devices, that is regularly updated, it will typically recognise the device and know what data to expect. Using the web interface, each sensor shows the data that it "exposes", and if required enables sensor configuration.
As noted, ZigBee and Wi-Fi channels both exist in the 2.4GHz band, existing in the exact same frequency space. When deploying both Wi-Fi and ZigBee in the same environments, careful planning must be performed to make sure that they don't interfere with each other.
The zigbee channel to be used can be set through the web interface, using Ch25 minimises potential interference.

![alt text](../../public/images/posts/signalk-zigbee-sensors/ultrasonic_exposes.webp)

More complex sensors eg Ultrasonic Level Sensor, have JSON payloads with multiple parameters (value pairs); and also can be configured via the web interface.
More complex sensors eg Ultrasonic Level Sensor, have JSON payloads with multiple parameters (value pairs); and also can be configured via the web interface.
All zigbee devices report "battery level" & "link quality", making it convenient to monitor battery life and set reminders, and also trouble shoot poor reception issues.

## NodeRed flow

For any of the Zigbee wireless sensors, each MQTT message includes a JSON payload from the sensor, which typically has a number of properties, requiring the desired values to be extracted & populated into respective SK paths. This is accomplished using a NodeRed flow with "MQTT IN" Node, and then parsed using a "change Node", followed by a send pathvalue Node, to populate the signalK path. For contact sensors that report JSON as "open" or "closed", additional nodes convert this into 1 or 0 path values.
The JSON data data for each sensor is shown in the "exposes" tab in zigbee2mqtt web page, from which the nodered parsing statements ("change Node") can be determined.
For any of the Zigbee wireless sensors, each MQTT message includes a JSON payload from the sensor, which typically has a number of properties, requiring the desired values to be extracted & populated into respective SK paths. This is accomplished using a NodeRed flow with "MQTT IN" Node, and then parsed using a "change Node", followed by a send pathvalue Node, to populate the signalK path. For contact sensors that report JSON as "open" or "closed", additional nodes convert this into 1 or 0 path values.
The JSON data data for each sensor is shown in the "exposes" tab in zigbee2mqtt web page, from which the nodered parsing statements ("change Node") can be determined.

![alt text](<../../public/images/posts/signalk-zigbee-sensors/nodered parse mqtt.webp>)

Repeat as many times as required, once for each zigbee sensor.
Note: that if utilising newer SignalK MQTT plugins, this "parsing" & populating of SK Paths from mqtt data might be configurable via the plugin, thereby avoiding the need for NodeRed parsing.
Note: that if utilising newer SignalK MQTT plugins, this "parsing" & populating of SK Paths from mqtt data might be configurable via the plugin, thereby avoiding the need for NodeRed parsing.

## Display of Hatch/Porthole Status

One of the disadvantages of zigbee sensors, stemming from their low power/long battery life characteristics, is they typically "only" report when a change occurs &/or after a predefined (long) elapsed time period. Accordingly the data becomes "stale" in SignalK, so respective dashboard/display applications need to treat (or ignore) this accordingly. In the dashboard example at top, Im using WilhelmSK (IOS devices) with a background image (line drawings of boat) and "LED guages" placed over the top of the image at locations of hatches etc. The guage is defined to be transparent when off & "red" when "on" (SignalK path = 1)
One of the disadvantages of zigbee sensors, stemming from their low power/long battery life characteristics, is they typically "only" report when a change occurs &/or after a predefined (long) elapsed time period. Accordingly the data becomes "stale" in SignalK, so respective dashboard/display applications need to treat (or ignore) this accordingly. In the dashboard example at top, Im using WilhelmSK (IOS devices) with a background image (line drawings of boat) and "LED guages" placed over the top of the image at locations of hatches etc. The guage is defined to be transparent when off & "red" when "on" (SignalK path = 1)
The magnetic switch sensor only updates when it closes/opens (& at a less frequent rate for battery or other updates), accordingly its "freshness" of  data can be many hours old - if you haven't opened/closed the hatch/window.

## Zigbee Motion Sensors

![alt text](../../public/images/posts/signalk-zigbee-sensors/zigbee_motion_sensor.webp)


I have fitted motion sensors inside the Saloon and also (under cover) in outdoor cockpit area; despite the harsh environment and water splashing, to date the sensors continue to work very well.
In a similar way, i utilise NodeRed flows to capture the motion and then initiate actions, eg switching on lights, subject to various conditions being met.
Given that with a combination of door/hatch & motion sensors, this provides an excellent basis for a intruder alarm system &/or alert/notifications when your away from the boat at anchor or when its at the dock!

## Zigbee Push Button (tap) switches

![alt text](../../public/images/posts/signalk-zigbee-sensors/zigbee_scene_switch.webp)

Its not always convenient to run a new wire and install a wall switch, but with low cost (<$5 each) "stick on" zigbee push buttons, you can conveniently place them around the boat, beside the bed to switch on lights or take other actions. eg They even come in Red color - that could make a perfect MOB button.
Its not always convenient to run a new wire and install a wall switch, but with low cost (<$5 each) "stick on" zigbee push buttons, you can conveniently place them around the boat, beside the bed to switch on lights or take other actions. eg They even come in Red color - that could make a perfect MOB button.
Each zigbee "button" can have three actions, namely "tap", "hold" and "double tap" - accordingly the NodeRed flow can initiate different actions as required.
Switches are available in multi gang wall plates for those more complex switching tasks.

## Zigbee Ultrasonic Tank Level sensor
 
![alt text](../../public/images/posts/signalk-zigbee-sensors/zigbee_ultrasonic_sensor.webp)

My black tank has simple float switches for "empty" (switch off pump out), "warning" (80%) and "full"; however i wanted improved resolution across the zero to full range, and whilst NMEA2000 Ultrasonic sensors cost >$200+, they also need wired connectivity into the N2k backbone, which in my case was very difficult to achieve for this tank location. I found a Zigbee ME210WZ Ultrasonic sensor (12V powered, not battery) that is claimed to "read tank depths up to 4m"; in my case the tank is only 0.4m deep; the sensor has a claimed "dead zone" from 0-100mm, however in my testing it reads reliably to around 40mm from its mounting face; and certainly with sufficient accuracy to monitor your black tank rate of use! 
Not only do you get tank level (ratio) in signalK, but by utilising the "SignalK to NMEA2000" plugin, the respective N2k PGN can be output for Black tank level, enabling it to be viewed on N2k capable displays eg MFDs.

![alt text](../../public/images/posts/signalk-zigbee-sensors/ultrasonic_state.webp)

## Zigbee Smoke Sensor

![alt text](../../public/images/posts/signalk-zigbee-sensors/zigbee_smoke_sensor.webp)

This unit operates as a standalone smoke sensor, but with the additional wireless zigbee functionality, I fitted one of these in the engine room, where its impossible to hear its inbuilt beeper from my helm position, however using notifications from signalK, I can send alerts to my phone and various signalK display devices. eg WilhelmSK dashboards and alerts
This sensor provides not only an "alarm" payload, but also "smoke density" concentration; albeit I have no way to determine any usable calibration for this.

## Zigbee Carbon Monoxide Sensor

![alt text](../../public/images/posts/signalk-zigbee-sensors/zigbee_carbonMonoxide.webp)

This unit is fitted in the engine room, and provides JSON data with an alarm if CO is detected & CO level in PPM.
For testing purposes, I held the unit near my car exhaust, an alarm was generated (as expected) along with a PPM reading, that was within an expected range for my test conditions. Having experienced a bad exhaust leak on a previous boat (what a mess that makes in the engine room!), Im keen to be able to detect this much earlier, aside of course the obvious safety aspects of early CO detection.

## Zigbee Temperature/Humidity sensors

![alt text](../../public/images/posts/signalk-zigbee-sensors/zigbee_temphumid.webp)![alt text](../../public/images/posts/signalk-zigbee-sensors/zigbee_temphumid1.webp)

There are a range of zigbee temp/humidity sensors available, some include a display (LCD) whilst others dont, but are smaller.
I have the higher quality units with larger LCD displays velcro mounted on cabin walls, for local  display, in addition to their zigbee reporting into SignalK.

## Zigbee Hardware/Sensor Costs

At the time of publication (sep 2025) (US$)
- ZBDongle-P ~$22
- Magnetic proximity switches <$4 
- Motion sensor ~$6 
- Ultrasonic Tank Sensor ~$45
- Smoke sensor ~$15
- Carbon Monoxide sensor ~$22
- Temperature/Humidity ~$5-12

## Summary

For a modest investment, a powerful array of wireless sensors can be built utilising zigbee technology and battery operated devices, that are easily deployed around the boat, and from my experience have proven quite durable and reliable over a 2+ year period.
